{% extends 'emailscraper_app/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/landing_page.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid"> <!-- Changed to container-fluid for full-width -->
    <div class="row">
        <div class="col-md-12"> <!-- Changed to col-md-12 to take full width -->
            <div class="content-wrapper">
                <h1 class="main-heading text-center">Data Engineering Designed for Schools</h1>
                <p class="tagline text-center"><strong>We help schools organize, clean, and store data in one singular location so your organization can gain insights on what matters.</strong></p> 
                <p class="text-center">We simplify the process of data management with automated ETL processes and leverage Google Cloud Platform for seamless integration and scalability <img src="https://storage.googleapis.com/django_hosting/base_images/gcp_vectorized.png" alt="Google Cloud Platform" class="gcp-image" style="width: 50px; height: auto; vertical-align: middle; margin-left: 10px;"></p></p>
           
               <!-- SVG Code -->
               <div class="svg-container">
                <svg viewBox="0 0 1000 500" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
                    <!-- Extract -->
                    <rect x="5%" y="20%" width="22%" height="20%" fill="rgba(126, 127, 128, 1)" stroke="#000" stroke-width="2" class="extract"/>
                    <text x="16%" y="30%" font-size="24" font-family="Arial" fill="white" text-anchor="middle">Extract</text>
                    <text x="16%" y="35%" font-size="16" font-family="Arial" fill="white" text-anchor="middle">(SIS, Vendors, Testing Data)</text>
                    
                    <!-- Transform -->
                    <rect x="40%" y="20%" width="20%" height="20%" fill="rgba(126, 127, 128, 1)" stroke="#000" stroke-width="2" class="transform"/>
                    <text x="50%" y="30%" font-size="24" font-family="Arial" fill="white" text-anchor="middle">Transform</text>
                    <text x="50%" y="35%" font-size="16" font-family="Arial" fill="white" text-anchor="middle">(Processing, ETL)</text>
                    
                    <!-- Load -->
                    <rect x="75%" y="20%" width="20%" height="20%" fill="rgba(126, 127, 128, 1)" stroke="#000" stroke-width="2" class="load"/>
                    <text x="85%" y="30%" font-size="24" font-family="Arial" fill="white" text-anchor="middle">Load</text>
                    <text x="85%" y="35%" font-size="16" font-family="Arial" fill="white" text-anchor="middle">(Cloud Database)</text>
                    
                    <!-- Arrows -->
                    <line x1="27%" y1="30%" x2="40%" y2="30%" stroke="black" stroke-width="4" marker-end="url(#arrow)"/>
                    <line x1="60%" y1="30%" x2="75%" y2="30%" stroke="black" stroke-width="4" marker-end="url(#arrow)"/>
                    
                    <!-- Arrow Definition -->
                    <defs>
                        <marker id="arrow" markerWidth="12" markerHeight="10" refX="12" refY="5" orient="auto">
                            <polygon points="0 0, 12 5, 0 10" fill="black"/>
                        </marker>
                    </defs>
                </svg>
            </div> <!-- Close content-wrapper here -->  

            </div>
        </div>
    </div>
</div>

{% include "emailscraper_app/toc.html" %}

<button id="toc-toggle" class="btn btn-primary d-md-none" title="Navigation" style="top: 251px;">â˜°</button>

{% endblock content %}

{% block extra_js %}
{{ block.super }}
<script>
    $(document).ready(function() {
        var tocToggle = document.getElementById('toc-toggle');
        var tocContainer = document.getElementById('toc-container');
        var navbar = document.querySelector('.navbar');

        // Function to set the position of the TOC toggle button
        function setTocTogglePosition() {
            var navbarHeight = navbar.offsetHeight;
            tocToggle.style.top = (navbarHeight + 10) + 'px'; // 10px below the navbar
        }

        // Set the initial position of the TOC toggle button
        setTocTogglePosition();

        // Adjust the position of the TOC toggle button on window resize
        window.addEventListener('resize', setTocTogglePosition);

        tocToggle.addEventListener('click', function() {
            tocContainer.classList.toggle('open');
            tocToggle.classList.toggle('open');

            if (tocContainer.classList.contains('open')) {
                var tocRect = tocContainer.getBoundingClientRect();
                tocToggle.style.top = tocRect.top + 'px';
                tocToggle.style.right = '10px'; // Keep the button on the right side
                tocToggle.style.left = 'auto'; // Reset left position
                tocToggle.style.zIndex = '1000'; // Ensure the button is on top
            } else {
                setTocTogglePosition();
                tocToggle.style.left = '10px';
                tocToggle.style.right = 'auto';
                tocToggle.style.zIndex = 'auto'; // Reset z-index
            }
        });
    });
</script>
<script>
    (function() {
    var target = document.getElementById('calendar-button-container');
    window.addEventListener('load', function() {
        console.log(calendar); // Check if calendar is defined
        if (calendar) {
            calendar.schedulingButton.load({
                url: 'https://calendar.google.com/calendar/appointments/schedules/AcZssZ1YEbyOgaX3uivrz4uynx7FLP68WD7OZxcaoi2sH003T2gLao95wSfPzkUckhMAeY-mcsJ_dEj8?gv=true',
                color: '#fff',
                label: 'Get in Touch',
                target: target,
                className: 'custom-calendar-button'
            });
        } else {
            console.error('Google Calendar schedulingButton object not found!');
        }
        });
    })();
</script>
{% endblock extra_js %}

{% block footer %}
<div class="contact-content-container">
  <div class="contact-content">
      <a href="https://github.com/2015samtaylor" target="_blank" class="github-link">
          <img src="https://storage.googleapis.com/django_hosting/base_images/github-mark-white.png" alt="GitHub" class="github-logo">
      </a>

      <a href="mailto:2015samtaylor@gmail.com" class="gmail-link">
          <img src="https://storage.googleapis.com/django_hosting/base_images/gmail-icon.png" alt="email">
      </a>

      <!-- Google Calendar Appointment Scheduling begin -->
      <div id="calendar-button-container"></div>
      <link href="https://calendar.google.com/calendar/scheduling-button-script.css" rel="stylesheet">
      <script src="https://calendar.google.com/calendar/scheduling-button-script.js" async></script>
  </div>
</div>
{% endblock footer %}

